<html>
	<head>
		<title>Hoi</title>
		<link rel="stylesheet" href="./stylesheet/basic.css">
		<link rel="stylesheet" href="./stylesheet/animations.css">
		<meta charset="UTF-8">
		<!--jQuery-->
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
		<link rel="stylesheet" href="./stylesheet/jquery-ui.css" />
		<script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.11.3/jquery-ui.min.js"></script>
		<script src="flot/jquery.flot.js"></script>
		<script src="flot/jquery.flot.time.js"></script>
		<style>
			#flot {
				height: 300px;
				width: 700px;
			}
			.legend table, .legend > div  {
				height: 80px ;
				opacity: 1 ;
				left: 50px;
				top: 30px;
				width: 100px ;
				border: 2px solid #555;
				padding: 5px;
				background-color: #ffffff;
			}
			#flot-tooltip {
				font-size: 12px;
				font-family: Verdana, Arial, sans-serif;
				position: absolute;
				display: none;
				border: 2px solid;
				padding: 2px;
				background-color: #FFF;				
				border-radius: 5px;
			}
		</style>
		<script>

		function getCSV () {
			var data1 = [];
			var data2 = [];

			$.get("report.csv", function (data) {
				var lines = data.split('\n');

				for (var i = 0; i < lines.length; i++) {
					var line = lines[i].split(',');

					// console.log(line[2]);

					data1.push([i, parseInt(line[1])]);
					data2.push([i, parseInt(line[2])]);
				}
				var data = [
				{label: "SOAP",  data: data1, color: '#ff6600'},
				{label: "REST",  data: data2, color: '#0000ff'}];

				$.plot(("#flot"), data,  {
					xaxis: {
						min: 0,
						max: 500,
						tickSize: 50,
						// ticks geeft jaar waarde weer, op het moment in csv dat jaar verandert.
						ticks: [[0,'2005'],[21,'2006'], [73,'2007'], [126,'2008'], [178,'2009'], [230,'2010'], [282,'2011'], [334,'2012'], [387,'2013'], [439,'2014'], [491,'2015']]    
					}, 

					yaxis: {
						min: 0,
						max: 100,
						tickSize: 5
					},
					legend: {
						labelBoxBorderColor: "none",
						position: "right"
					},
					grid: {
						hoverable: true
					}
				});
				//maakt de tooltip
				function showTooltip(x, y, contents, color) {
					$('<div id="flot-tooltip">' + contents + '</div>').css({
						top: y - 75,
						left: x - 30,
						'border-color': color,
					}).appendTo("body").fadeIn(0);
				}
				//event als er over plot word gehovert
				$("#flot").bind("plothover", function (event, pos, item) {
					if (item) {				
 							$("#flot-tooltip").remove();
							
							date = item.datapoint[0]; // bij tijd zorgen dat dit datum word/ periode, of verwijderen
							value = item.datapoint[1];
							color = item.series.color;
 
							showTooltip(item.pageX, item.pageY,	 date + "<br />" + "<b>" + item.series.label + "</b> = " + value, color);
						
					} else {
						$("#flot-tooltip").remove();
						previousPoint = null;
					}	
				});
			});
		}

		$(function() {
			
			var csvData = getCSV();

			// console.log(csvData.d1);

			// console.log(csvData);
			// console.log(csvData.length);

			// var otherd = [[0,0], [500,100]];

			

		});
		</script>
	</head>
	<body>
	<div id="flot"></div>
	</body>
</html>